<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Nishanvi üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:Arial, sans-serif;
}
canvas{
  background:linear-gradient(#70c5ce,#bde7ff);
  border-radius:14px;
}
#msg{
  position:absolute;
  color:white;
  text-align:center;
}
#score{
  position:absolute;
  top:15px;
  color:white;
  font-size:20px;
  font-weight:bold;
}
</style>
</head>

<body>

<div id="msg">
  <h2>Flappy Love for Nishanvi üíñ</h2>
  <p>Tap / Click / Space to Start</p>
</div>

<div id="score">‚ù§Ô∏è 0</div>

<canvas id="game" width="360" height="540"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const msg = document.getElementById("msg");
const scoreBox = document.getElementById("score");

// BIRD IMAGE
const birdImg = new Image();
birdImg.src = "https://i.ibb.co/q3hRnjrT/nishnavi2.jpg";

// GAME STATE
let bird, hearts, score;
let started = false;

// CONSTANTS
const gravity = 0.45;
const jump = -8;

// INIT
function init(){
  bird = { x:80, y:270, v:0, r:20 };
  hearts = [];
  score = 0;
  scoreBox.innerText = "‚ù§Ô∏è 0";
}

// INPUT
function flap(){
  if(!started){
    started = true;
    msg.style.display = "none";
    init();
  }
  bird.v = jump;
}

document.addEventListener("click", flap);
document.addEventListener("keydown", e=>{
  if(e.code === "Space") flap();
});

// CREATE HEART
function addHeart(){
  hearts.push({
    x: canvas.width + 20,
    y: Math.random() * 360 + 80,
    size: 18,
    hit: false
  });
}

// DRAW HEART
function drawHeart(x,y,size){
  ctx.fillStyle = "#ff4d6d";
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.bezierCurveTo(x-size, y-size, x-size*1.5, y+size/2, x, y+size);
  ctx.bezierCurveTo(x+size*1.5, y+size/2, x+size, y-size, x, y);
  ctx.fill();
}

// LOOP
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(started){
    // BIRD
    bird.v += gravity;
    bird.y += bird.v;

    ctx.save();
    ctx.beginPath();
    ctx.arc(bird.x,bird.y,bird.r,0,Math.PI*2);
    ctx.clip();
    ctx.drawImage(birdImg,bird.x-bird.r,bird.y-bird.r,bird.r*2,bird.r*2);
    ctx.restore();

    // SCREEN LIMIT
    if(bird.y + bird.r > canvas.height || bird.y - bird.r < 0){
      started = false;
      msg.innerHTML = "<h2>Game Over üíî</h2><p>Tap to Restart</p>";
      msg.style.display = "block";
    }

    // HEART SPAWN
    if(Math.random() < 0.02) addHeart();

    hearts.forEach(h=>{
      h.x -= 2.5;
      drawHeart(h.x,h.y,h.size);

      // COLLISION
      const dx = bird.x - h.x;
      const dy = bird.y - h.y;
      if(!h.hit && Math.sqrt(dx*dx + dy*dy) < bird.r + h.size){
        h.hit = true;
        score++;
        scoreBox.innerText = "‚ù§Ô∏è " + score;
      }
    });

    hearts = hearts.filter(h => h.x > -30 && !h.hit);
  }

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
